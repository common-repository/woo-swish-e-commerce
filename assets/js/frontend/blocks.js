!function(){"use strict";var e=window.wp.element,t=window.wc.wcBlocksRegistry,n=window.wp.i18n,s=(window.React,window.wc.wcSettings);const o=()=>{const e=(0,s.getSetting)("swish_data",null);if(console.log("swishServerData",e),!e)throw new Error("Swish initialization data is not available");return e};window.wp.components;const a={style:{base:{iconColor:"#666EE8",color:"#31325F",fontSize:((e,t,n)=>{let s={};if("object"==typeof document&&"function"==typeof document.querySelector&&"function"==typeof window.getComputedStyle){const e=document.querySelector(".wc-block-checkout");e&&(s=window.getComputedStyle(e))}return s.fontSize||"16px"})(),lineHeight:1.375,"::placeholder":{color:"#fff"}}},classes:{focus:"focused",empty:"empty",invalid:"has-error"}},r=t=>{const{className:n,label:s,id:o,value:a,placeholder:r,onChange:l}=t;return(0,e.createElement)("input",{className:n,label:s,id:o,placeholder:r,value:a,onChange:e=>{l(e.target.value)}})},l=({inputErrorComponent:t,onChange:n,paymentRequestData:s,setPayerAlias:l,payerAlias:i,showWaitModal:c})=>{const[m,p]=(0,e.useState)(!0),{options:u,onActive:w,error:h,setError:d}=(t=>{const[n,s]=(0,e.useState)(!1),[o,r]=(0,e.useState)({...a}),[l,i]=(0,e.useState)("");return(0,e.useEffect)((()=>{const e=n?"#CFD7E0":"#fff";r((t=>({...t,style:{...t.style,base:{...t.style.base,"::placeholder":{color:e}}}})))}),[n]),{options:o,onActive:(0,e.useCallback)((e=>{s(!e||(e=>!e))}),[s]),error:l,setError:i}})(),{logoText:y,logoImage:g,placeholder:E,label:S,m_payment:b,description:f}=o();return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"wc-swish-inline-element",id:"swish-description"},f),!b&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"wc-block-gateway-container wc-inline-card-element"},(0,e.createElement)(r,{id:"wc-swish-inline-element",className:"wc-block-gateway-input",value:i,options:u,placeholder:E,onBlur:()=>w(m),onFocus:()=>w(m),onChange:e=>{p(0===e.length),isNaN(e)?e.length>0&&"+"!=e.charAt(0)||isNaN(e.slice(1))?(d("Use numbers and + only"),e=e.slice(0,-1)):d(""):e.length>0&&"0"!==e.charAt(0)&&"+"!==e.charAt(0)?(d("First charachter in the number must be 0 or +"),e=e.slice(0,-1)):d(""),l(e),n(e)}}),(0,e.createElement)("label",{htmlFor:"wc-swish-inline-element"},S)),(0,e.createElement)(t,{errorMessage:h})))},i=({eventRegistration:t,emitResponse:s,billing:o,components:a})=>{const{ValidationInputError:r}=a,[i,c]=(0,e.useState)(""),[m,p]=(0,e.useState)(!1),[u,w]=(0,e.useState)(""),h=((t,s,o,a,r,l,i,c,m)=>{const[p,u]=(0,e.useState)(""),w=(0,e.useCallback)((e=>{var t;const{type:s,code:o="",message:a}=e,r=null!==(t=((e,t="")=>e===errorTypes.API_ERROR?getMessageString(t):(0,n.__)("Unable to process your Swish payment, please try again or use alternative method.","woo-swish-e-commerce"))(s,o))&&void 0!==t?t:a;return u(r),r}),[]),{onCheckoutFail:h,onPaymentSetup:d}=t;return((t,n)=>{(0,e.useEffect)((()=>n((()=>(console.log("usePaymentProcessing, onPaymentSetup"),{type:"success",meta:{paymentMethodData:{"swish-payer-alias":t}}})))),[n,t])})(l,d),(0,e.useEffect)((()=>h((({processingResponse:e})=>!e?.paymentDetails?.errorMessage||{type:s.responseTypes.ERROR,message:e.paymentDetails.errorMessage,messageContext:s.noticeContexts.PAYMENTS}))),[h,s.noticeContexts.PAYMENTS,s.responseTypes.ERROR]),w})(t,s,0,0,0,u);return(0,e.createElement)(l,{showWaitModal:m,id:"swish-number",value:u,paymentRequestData:!0,setPayerAlias:w,payerAlias:u,onChange:e=>{e.error&&h(e),c("")},inputErrorComponent:r})};var c=window.wp.htmlEntities;const m=o(),p={name:"swish",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:s}=t.components,a=o()?.icon,r=o()?.title,l=(0,e.createElement)("img",{src:a,alt:(0,c.decodeEntities)((0,n.__)("Swish","woo-swish-e-commerce")),align:"right"});return(0,e.createElement)("span",{className:"wc-swish-label-container",style:{width:"98%",display:"block"}},(0,e.createElement)(s,{text:r}),l)}),{props:!0}),content:(0,e.createElement)(i,{props:!0}),edit:(0,e.createElement)(i,{props:!0}),canMakePayment:()=>!0,ariaLabel:(0,n.__)("Swish payment method","woo-swish-e-commerce"),supports:{features:m.supports},paymentMethodId:"swish"};(0,t.registerPaymentMethod)(p)}();